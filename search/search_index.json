{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Pincer Protocol","text":"<p>The Intelligent Payment-Gated API Layer</p> <p>Pincer represents a new paradigm in API monetization: Payment-Gated Intelligence. It seamlessly integrates high-performance AI agents with the x402 payment protocol, allowing developers to monetize their APIs with micro-transactions while offering automated rebates and sponsored access.</p> <p>Product Demo Pitch Deck</p>"},{"location":"#why-pincer","title":"Why Pincer?","text":""},{"location":"#zero-friction-monetization","title":"\ud83d\ude80 Zero-Friction Monetization","text":"<p>Integrate payments into any API endpoint with just a few lines of code. No complex merchant accounts or subscription management required.</p>"},{"location":"#agent-native","title":"\ud83e\udd16 Agent-Native","text":"<p>Built for the autonomous economy. Pincer APIs are designed to be consumed by AI agents, with machine-readable payment requirements and automatic negotiation.</p>"},{"location":"#dynamic-rebates","title":"\ud83d\udcb8 Dynamic Rebates","text":"<p>Sponsors can subsidize user access. Pincer's \"Post-Pay Rebate\" system allows third parties to refund user fees instantly, driving traffic without lowering the paywall.</p>"},{"location":"#examples","title":"Examples","text":"<p>Check out the <code>examples/</code> directory for standalone scripts demonstrating key integrations:</p> <ul> <li>Buyer Flow: Client-side payment handling.</li> <li>Resource Server: Protecting content with x402.</li> <li>Sponsor Integration: Reporting conversions.</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<p>Understand how Pincer facilitates trustless payments and rebates between Agents and APIs.</p> <p> Core Architecture</p>"},{"location":"#get-started","title":"Get Started","text":"- **x402 Sellers**    Monetize your data/services and accept crypto micro-payments from Buyers.    [:arrow_right: Seller Integration](guides/seller.md)   [:arrow_right: Buyer Guide](guides/buyer.md)  - **Sponsors**    Offer rebates to users to drive traffic and brand awareness.    [:arrow_right: Campaign Guide](guides/sponsor.md)"},{"location":"#security-audit","title":"Security Audit","text":"<p>The Pincer protocol and reference implementation have been audited for security and functional correctness.</p> <p>View Audit Reports</p>"},{"location":"#see-it-in-action","title":"See it in Action","text":"<p>Want to see the entire flow? Run the end-to-end demo.</p> <p>Run Demo</p>"},{"location":"architecture/","title":"Architecture","text":"<p>Pincer enables a seamless value exchange between AI agents and service providers.</p>"},{"location":"architecture/#protocol-flow","title":"Protocol Flow","text":"<p>The core interaction follows the Request-Pay-Verify-Rebate cycle.</p> <pre><code>sequenceDiagram\n    participant User\n    participant Agent as AI Agent (Client)\n    participant Server as Resource Server\n    participant Blockchain\n    participant Sponsor\n\n    User-&gt;&gt;Agent: Request \"Best Pizza NYC\"\n    Agent-&gt;&gt;Server: GET /recommendations\n    Server--&gt;&gt;Agent: 402 Payment Required\n    Note right of Server: x402 Header: &lt;br/&gt;\"pay 0.01 USDC to addr...\"\n\n    Agent-&gt;&gt;Blockchain: Sign &amp; Broadcast Tx\n    Blockchain--&gt;&gt;Agent: Confirmed\n\n    Agent-&gt;&gt;Server: Retry Request + Proof\n    Server-&gt;&gt;Blockchain: Verify Transaction\n    Blockchain--&gt;&gt;Server: Defines Success\n\n    Server--&gt;&gt;Agent: 200 OK + Data\n    Note right of Server: Returns Recommendations&lt;br/&gt;+ Sponsor Rebate Offer\n\n    rect rgb(240, 248, 255)\n    Note over Sponsor, Blockchain: Async / Post-Process\n    Sponsor-&gt;&gt;Blockchain: Detects Tx &amp; Refunds User\n    Blockchain--&gt;&gt;User: +0.01 USDC (Rebate)\n    end</code></pre>"},{"location":"architecture/#key-components","title":"Key Components","text":""},{"location":"architecture/#1-resource-server-x402-server","title":"1. Resource Server (<code>x402-server</code>)","text":"<p>The gatekeeper. It intercepts requests, checks for valid payment headers, and issues 402 challenges if payment is missing. In Pincer, this is wrapped by <code>PincerResourceServer</code> for simpler integration.</p>"},{"location":"architecture/#2-facilitator-verified-by-pincer","title":"2. Facilitator (Verified by Pincer)","text":"<p>An on-chain or off-chain entity that verifies the payment occurred. Pincer acts as a facilitator, indexing blockchain events to confirm transactions instantly. The facilitator logic has been professionally audited (Link to Report).</p>"},{"location":"architecture/#3-sponsors","title":"3. Sponsors","text":"<p>Third-party entities (like Restaurants, Brands) that configure \"Campaigns\". If a user's request matches a campaign criteria (e.g., \"User paid for Pizza search\"), the sponsor triggers a rebate transaction to the user's wallet.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>We welcome contributions to the Pincer ecosystem!</p>"},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":"<ol> <li>Fork the Repository: Create your own fork of <code>pincer-x402-starter</code>.</li> <li>Clone: Clone your fork locally.</li> <li>Branch: Create a feature branch (<code>git checkout -b feature/amazing-feature</code>).</li> <li>Commit: Commit your changes (<code>git commit -m 'Add amazing feature'</code>).</li> <li>Push: Push to the branch (<code>git push origin feature/amazing-feature</code>).</li> <li>Pull Request: Open a PR on the main repository.</li> </ol>"},{"location":"contributing/#reporting-issues","title":"Reporting Issues","text":"<p>If you find a bug or have a feature request, please open an issue on our GitHub Repository.</p>"},{"location":"demo/","title":"Running the Demo","text":"<p>See the Pincer protocol in action with a complete end-to-end simulation.</p>"},{"location":"demo/#overview","title":"Overview","text":"<p>The demo simulates a complete interaction cycle:</p> <ol> <li>Buyer requests a resource.</li> <li>Seller challenges with a 402 Payment Required.</li> <li>Buyer pays via Solana (Devnet).</li> <li>Seller verifies and returns content.</li> <li>Sponsor (Shake Shack) rebates the fee.</li> </ol>"},{"location":"demo/#prerequisite","title":"Prerequisite","text":"<p>Clone the starter repository:</p> <pre><code>git clone https://github.com/pincerclaw/pincer-x402-starter\ncd pincer-x402-starter\npip install .\n</code></pre>"},{"location":"demo/#run-the-demo","title":"Run the Demo","text":"<p>Execute the agent simulation:</p> <pre><code>uv run src/agent/demo.py\n</code></pre>"},{"location":"demo/#what-youll-see","title":"What you'll see","text":"<pre><code>\ud83d\ude80 Pincer x402 Demo\n...\nStep 1: Request paywalled content (no payment)\nHTTP 402 Payment Required\n...\nStep 3: Request with payment proof\nHTTP 200 OK\n...\n\ud83c\udf81 Sponsor Offers:\n   \ud83d\udcb0 Shake Shack: Get x402 fee rebate on your first order\n</code></pre>"},{"location":"sdk/","title":"SDK Reference","text":""},{"location":"sdk/#pincerpaymentmiddleware","title":"<code>PincerPaymentMiddleware</code>","text":"<p>The recommended way to protect your API. It handles the x402 challenge-response loop and automatically injects Pincer-specific data (like <code>sponsors</code>).</p>"},{"location":"sdk/#usage-fastapi","title":"Usage (FastAPI)","text":"<pre><code>from pincer_sdk.middleware import PincerPaymentMiddleware\nfrom x402.server import x402ResourceServer\n\n# ... initialize client and facilitator\nserver = x402ResourceServer(facilitator)\n\n# Add middleware to your app\napp.add_middleware(PincerPaymentMiddleware, routes=routes, server=server)\n</code></pre>"},{"location":"sdk/#pincerfacilitatorclient","title":"<code>PincerFacilitatorClient</code>","text":"<p>A specialized <code>FacilitatorClient</code> that preserves Pincer-specific data (like <code>sponsors</code>) during the verification process.</p>"},{"location":"sdk/#usage","title":"Usage","text":"<pre><code># Standard way to get the facilitator from the client\nfacilitator = client.facilitator()\n</code></pre>"},{"location":"sdk/#accessing-sponsors","title":"Accessing Sponsors","text":"<p>After verification, you can access sponsors in your route handlers:</p> <pre><code>@app.get(\"/premium-data\")\nasync def get_data(request: Request):\n    # Populated by PincerPaymentMiddleware\n    payment = getattr(request.state, \"payment\", None)\n    sponsors = getattr(payment, \"sponsors\", []) if payment else []\n\n    return {\"sponsors\": sponsors, ...}\n</code></pre>"},{"location":"guides/buyer/","title":"Buyer Guide","text":"<p>Role: You are a Buyer (Agent/Client). You want to access high-value APIs gated by Pincer.</p>"},{"location":"guides/buyer/#how-it-works","title":"How it Works","text":"<p>Pincer APIs use the standard <code>x402</code> protocol. You don't need a proprietary client, but using <code>pincer-sdk</code> or <code>x402</code> client libraries makes it automatic.</p>"},{"location":"guides/buyer/#making-a-request","title":"Making a Request","text":"<pre><code>from x402.client import x402Client\n\n# 1. Initialize Client with a Wallet\nclient = x402Client(wallet=my_solana_wallet)\n\n# 2. Making a Request\n# The client automatically handles the 402 challenge/response loop\nresponse = await client.get(\"https://pincer.zeabur.app/resource/premium-data\")\n\nprint(response.json())\n</code></pre>"},{"location":"guides/buyer/#what-happens-under-the-hood","title":"What happens under the hood?","text":"<ol> <li>Initial Request: You send a normal GET request.</li> <li>Challenge: Server replies <code>402 Payment Required</code> with a header <code>WWW-Authenticate: x402 ...</code>.</li> <li>Sign: Your client looks at the cost, signs a transaction (or uses a payment channel).</li> <li>Retry: Your client allows the payment proof in the <code>Authorization</code> or <code>X-Payment</code> header and retries.</li> <li>Success: Server returns <code>200 OK</code>.</li> </ol>"},{"location":"guides/seller/","title":"Seller Integration","text":"<p>Role: You are a Seller (API Provider). You want to monetize your data/services and accept crypto micro-payments from Buyers (Agents).</p>"},{"location":"guides/seller/#prerequisite","title":"Prerequisite","text":"<p>Install the Pincer SDK:</p> <pre><code>pip install pincer-sdk\n</code></pre>"},{"location":"guides/seller/#step-1-initialize-server","title":"Step 1: Initialize Server","text":"<p>The <code>x402_server</code> handles the complex negotiation, payment headers, and validation for you.</p> <pre><code>from pincer_sdk.client import PincerClient\nfrom pincer_sdk.facilitator import PincerFacilitatorClient\nfrom x402.server import x402ResourceServer\n\n# 1. Initialize Pincer Client\n# Uses PINCER_URL from env (e.g. https://pincer.zeabur.app)\nclient = PincerClient(api_key=\"...\")\n\n# 2. Create Server (Composition Pattern)\n# Use Pincer's client to handle extra data (like sponsors)\nfacilitator = PincerFacilitatorClient(client)\n\n# Create standard x402 server\nserver = x402ResourceServer(facilitator)\n\n# Register schemes (e.g. EVM, Solana) - see x402 docs for details\n# server.register(...)\n</code></pre>"},{"location":"guides/seller/#step-2-protect-your-route-middleware","title":"Step 2: Protect your Route (Middleware)","text":"<p>The simplest way to protect your API is using the Pincer SDK Middleware.</p> <pre><code>from pincer_sdk.middleware import PincerPaymentMiddleware\n\n# 1. Define Routes &amp; Costs\nroutes = {\n    \"/premium-data\": RouteConfig(\n        accepts=[\n            PaymentOption(\n                scheme=\"exact\",\n                pay_to=\"0x...\",\n                price=\"$0.01\",\n                network=\"solana:mainnet\"\n            )\n        ]\n    )\n}\n\n# 2. Add Middleware\napp.add_middleware(PincerPaymentMiddleware, routes=routes, server=server)\n\n# 3. Handle Request (Payment Verified)\n@app.get(\"/premium-data\")\nasync def get_premium_data(request: Request):\n    # If we reach here, payment is already verified!\n\n    # 4. Access Active Sponsors (Rebates)\n    # The Pincer middleware automatically populates sponsors\n    payment = getattr(request.state, \"payment\", None)\n    sponsors = getattr(payment, \"sponsors\", []) if payment else []\n\n    return {\n        \"status\": \"paid\",\n        \"data\": \"Secret Intelligence\",\n        \"sponsors\": sponsors\n    }\n</code></pre>"},{"location":"guides/sponsor/","title":"Campaign Guide","text":""},{"location":"guides/sponsor/#the-rebate-mechanism","title":"The Rebate Mechanism","text":"<p>Pincer allows \"Post-Pay Rebates\":</p> <ol> <li>User pays for API access via x402.</li> <li>Pincer detects the transaction.</li> <li>Instant Rebate: If the transaction matches your Campaign criteria, you sponsor the cost (partially or fully).</li> </ol>"},{"location":"guides/sponsor/#launch-a-campaign","title":"Launch a Campaign","text":"<p>Sponsor campaigns are managed directly by the Pincer Protocol team to ensure quality and relevance.</p>"},{"location":"guides/sponsor/#contact-us","title":"Contact Us","text":"<p>To set up a campaign, please reach out to our partnerships team:</p> <ul> <li>Email: partnerships@pincer.protocol</li> <li>Twitter/X: @PincerProtocol</li> </ul> <p>We will help you define:</p> <ul> <li>Target Audience: Specific APIs or data types.</li> <li>Budget: Daily/Weekly caps in USDC/SOL.</li> <li>Offer: Rebate percentage and promotional message.</li> </ul>"}]}